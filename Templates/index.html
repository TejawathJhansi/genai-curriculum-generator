<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Curriculum Generator</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Poppins', Arial, sans-serif;
      background: linear-gradient(135deg, #f8b4cb, #f3c6e2, #e8b4f8, #f8b4cb);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      min-height: 100vh;
      overflow: hidden;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ‚îÄ‚îÄ FLOATING PARTICLES ‚îÄ‚îÄ */
    .particles {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .particle {
      position: absolute;
      font-size: 1.4em;
      animation: floatUp linear infinite;
      opacity: 0.4;
    }

    @keyframes floatUp {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 0.4; }
      90% { opacity: 0.4; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }

    /* ‚îÄ‚îÄ SPLASH SCREEN ‚îÄ‚îÄ */
    #splash {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      transition: transform 0.9s cubic-bezier(0.77, 0, 0.175, 1), opacity 0.9s ease;
    }

    #splash.slide-up {
      transform: translateY(-100%);
      opacity: 0;
    }

    .splash-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 32px;
      padding: 60px 50px;
      text-align: center;
      max-width: 460px;
      width: 90%;
      box-shadow: 0 30px 80px rgba(200, 100, 150, 0.2);
      animation: cardFloat 3s ease-in-out infinite;
    }

    @keyframes cardFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .logo-circle {
      width: 110px;
      height: 110px;
      background: linear-gradient(135deg, #1565C0, #1976D2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      font-size: 3em;
      box-shadow: 0 10px 30px rgba(21, 101, 192, 0.4);
      animation: logoPulse 2s ease-in-out infinite;
    }

    @keyframes logoPulse {
      0%, 100% { box-shadow: 0 10px 30px rgba(21, 101, 192, 0.4); transform: scale(1); }
      50% { box-shadow: 0 15px 40px rgba(21, 101, 192, 0.6); transform: scale(1.05); }
    }

    .splash-title {
      font-size: 1.9em;
      font-weight: 700;
      color: #ffffff;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
      margin-bottom: 10px;
      line-height: 1.2;
    }

    .splash-tagline {
      font-size: 0.92em;
      color: rgba(255,255,255,0.9);
      font-weight: 400;
      margin-bottom: 36px;
      line-height: 1.6;
    }

    .get-started-btn {
      padding: 15px 48px;
      background: linear-gradient(135deg, #1565C0, #1976D2);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 1em;
      font-weight: 600;
      font-family: 'Poppins', Arial, sans-serif;
      cursor: pointer;
      letter-spacing: 0.5px;
      box-shadow: 0 8px 25px rgba(21, 101, 192, 0.35);
      transition: all 0.3s ease;
      margin-bottom: 16px;
      display: block;
      width: 100%;
    }

    .get-started-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 14px 35px rgba(21, 101, 192, 0.5);
    }

    .auto-text {
      font-size: 0.78em;
      color: rgba(255,255,255,0.8);
    }

    .timer-bar {
      width: 100%;
      height: 3px;
      background: rgba(255,255,255,0.3);
      border-radius: 3px;
      margin-top: 10px;
      overflow: hidden;
    }

    .timer-fill {
      height: 100%;
      background: linear-gradient(to right, #1565C0, #1976D2);
      border-radius: 3px;
      animation: timerCount 3s linear forwards;
    }

    @keyframes timerCount {
      0% { width: 0%; }
      100% { width: 100%; }
    }

    /* ‚îÄ‚îÄ MAIN APP ‚îÄ‚îÄ */
    #app {
      position: relative;
      z-index: 5;
      padding: 30px 20px;
      min-height: 100vh;
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 0.8s ease 0.4s, transform 0.8s ease 0.4s;
      pointer-events: none;
    }

    #app.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: all;
      overflow-y: auto;
    }

    .container {
      max-width: 820px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 24px;
      overflow: hidden;
      box-shadow: none;
    }

    /* HEADER ‚Äî pink background */
    .header {
      background: linear-gradient(135deg, #f8b4cb, #f3c6e2, #f8b4cb);
      padding: 36px 40px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      margin-bottom: 8px;
    }

    .header-logo {
      width: 50px; height: 50px;
      background: #1565C0;
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.6em;
    }

    .header h1 {
      color: #111111;
      font-size: 1.9em;
      font-weight: 700;
    }

    .header p {
      color: #333333;
      font-size: 0.92em;
      font-weight: 400;
    }

    /* BODY */
    .body { padding: 36px 40px; }

    .section-title {
      font-size: 1.05em;
      color: #111111;
      font-weight: 600;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-title::after {
      content: ''; flex: 1; height: 2px;
      background: linear-gradient(to right, #1976D2, transparent);
      border-radius: 2px;
    }

    .form-box { display: flex; flex-direction: column; gap: 14px; margin-bottom: 28px; }

    .input-group label {
      display: block;
      font-size: 0.8em;
      color: #111111;
      font-weight: 600;
      margin-bottom: 5px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    input, select {
      width: 100%;
      padding: 13px 16px;
      border: 2px solid rgba(255, 255, 255, 0.6);
      border-radius: 25px;
      font-size: 0.95em;
      font-family: 'Poppins', Arial, sans-serif;
      color: #111111;
      background: rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
    }

    input:focus, select:focus {
      border-color: #1565C0;
      outline: none;
      box-shadow: 0 0 0 4px rgba(21, 101, 192, 0.1);
    }

    input::placeholder { color: #aaaaaa; }

    /* BLUE BUTTON */
    .generate-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #1565C0, #1976D2);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 1em;
      font-weight: 600;
      font-family: 'Poppins', Arial, sans-serif;
      cursor: pointer;
      letter-spacing: 0.5px;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(21, 101, 192, 0.3);
    }

    .generate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 28px rgba(21, 101, 192, 0.45);
    }

    /* LOADING */
    #loading { display: none; text-align: center; padding: 40px; }

    .loading-dots { display: flex; justify-content: center; gap: 8px; margin-bottom: 16px; }

    .dot {
      width: 12px; height: 12px;
      background: #1565C0;
      border-radius: 50%;
      animation: bounce 1.2s ease infinite;
    }
    .dot:nth-child(2) { animation-delay: 0.2s; }
    .dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes bounce {
      0%, 80%, 100% { transform: translateY(0); opacity: 0.5; }
      40% { transform: translateY(-16px); opacity: 1; }
    }

    #loading p { color: #111111; font-weight: 500; }

    /* RESULTS */
    .semester {
      border: 2px solid rgba(255,255,255,0.4);
      border-radius: 16px;
      padding: 24px;
      margin: 16px 0;
      background: rgba(255,255,255,0.15);
      transition: transform 0.2s ease;
    }
    .semester:hover { transform: translateY(-2px); }
    .semester h2 { color: #111111; font-size: 1.05em; margin-bottom: 14px; }

    .course {
      background: rgba(255,255,255,0.85);
      border: 1px solid rgba(255,255,255,0.9);
      border-radius: 25px;
      padding: 16px;
      margin: 10px 0;
      border-left: 4px solid #1565C0;
    }

    .course h3 { color: #111111; font-size: 0.93em; font-weight: 600; margin-bottom: 6px; }

    .credits {
      display: inline-block;
      background: #E3F2FD;
      color: #1565C0;
      padding: 2px 10px;
      border-radius: 20px;
      font-size: 0.73em;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .topics { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }

    .topic {
      background: #E3F2FD;
      color: #1565C0;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.76em;
      font-weight: 500;
    }

    /* DOWNLOAD BUTTONS ‚Äî blue */
    #downloadBtns { display: none; gap: 12px; margin-top: 24px; }

    .dl-btn {
      flex: 1; padding: 13px; border: none; border-radius: 25px;
      font-size: 0.9em; font-weight: 600;
      font-family: 'Poppins', Arial, sans-serif;
      cursor: pointer; transition: all 0.3s ease;
    }

    .dl-btn.pdf {
      background: linear-gradient(135deg, #1565C0, #1976D2);
      color: white;
      box-shadow: 0 4px 15px rgba(21, 101, 192, 0.3);
    }

    .dl-btn.json {
      background: #E3F2FD;
      color: #1565C0;
      border: 2px solid #1976D2;
    }

    .dl-btn:hover { transform: translateY(-2px); }

    /* FOOTER */
    .footer {
      text-align: center; padding: 20px;
      color: #888888; font-size: 0.78em;
      border-top: 1px solid #eeeeee; margin-top: 10px;
    }
  </style>
</head>
<body>

  <!-- FLOATING PARTICLES -->
  <div class="particles" id="particles"></div>

  <!-- SPLASH SCREEN -->
  <div id="splash">
    <div class="splash-card">
      <div class="logo-circle">üéì</div>
      <div class="splash-title"> Curriculum Generator</div>
      <div class="splash-tagline">Transform any skill into a beautiful<br>semester-wise study plan with AI üéì</div>
      <button class="get-started-btn" onclick="openApp()">Get Started</button>
      <div class="auto-text">Opens automatically in 3 seconds...</div>
      <div class="timer-bar"><div class="timer-fill"></div></div>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="app">
    <div class="container">
      <div class="header">
        <div class="header-top">
          <div class="header-logo">üéì</div>
          <h1> Curriculum Generator</h1>
        </div>
        <p>Transform any skill into a semester-wise study plan</p>
      </div>

      <div class="body">
        <p class="section-title">üìù Create Your Curriculum</p>

        <div class="form-box">
          <div class="input-group">
            <label>Skill or Subject</label>
            <input type="text" id="skill" placeholder="e.g. Machine Learning, Web Development" />
          </div>
          <div class="input-group">
            <label>Education Level</label>
            <select id="level">
              <option value="">Select your level...</option>
              <option>Diploma</option>
              <option>BTech</option>
              <option>Masters</option>
              <option>Certification</option>
            </select>
          </div>
          <div class="input-group">
            <label>Number of Semesters</label>
            <select id="semesters">
              <option value="2">2 Semesters ‚Äî 1 Year</option>
              <option value="4">4 Semesters ‚Äî 2 Years</option>
              <option value="6">6 Semesters ‚Äî 3 Years</option>
            </select>
          </div>
          <div class="input-group">
            <label>Weekly Hours (Optional)</label>
            <input type="text" id="hours" placeholder="e.g. 20 hours per week" />
          </div>
          <div class="input-group">
            <label>Industry Focus (Optional)</label>
            <input type="text" id="industry" placeholder="e.g. AI, Web, Finance, Healthcare" />
          </div>
          <button class="generate-btn" onclick="generate()">üéì Generate My Curriculum</button>
        </div>

        <div id="loading">
          <div class="loading-dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          </div>
          <p>AI is creating your curriculum... please wait!</p>
        </div>

        <div id="results"></div>

        <div id="downloadBtns">
          <button class="dl-btn pdf" onclick="downloadPDF()">üìÑ Download PDF</button>
          <button class="dl-btn json" onclick="downloadJSON()">üíæ Download JSON</button>
        </div>

        <div class="footer">Made with üìö by GenAI Curriculum Generator</div>
      </div>
    </div>
  </div>

  <script>
    // FLOATING PARTICLES
    const emojis = ['üéì', 'üìö', 'üìñ', 'üéì', 'üìù', 'üìö', 'üéì'];
    const container = document.getElementById('particles');
    for (let i = 0; i < 18; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      p.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = (6 + Math.random() * 10) + 's';
      p.style.animationDelay = (Math.random() * 8) + 's';
      p.style.fontSize = (0.8 + Math.random() * 1.2) + 'em';
      container.appendChild(p);
    }

    // AUTO OPEN AFTER 3 SECONDS
    let opened = false;
    setTimeout(() => { if (!opened) openApp(); }, 3000);

    function openApp() {
      if (opened) return;
      opened = true;
      document.getElementById('splash').classList.add('slide-up');
      document.body.style.overflow = 'auto';
      setTimeout(() => {
        document.getElementById('splash').style.display = 'none';
        document.getElementById('app').classList.add('visible');
      }, 900);
    }

    // CURRICULUM LOGIC
    let currentCurriculum = null;

    async function generate() {
      const skill = document.getElementById('skill').value;
      const level = document.getElementById('level').value;
      if (!skill || !level) { alert('Please fill in Skill and Level!'); return; }
      document.getElementById('loading').style.display = 'block';
      document.getElementById('results').innerHTML = '';
      document.getElementById('downloadBtns').style.display = 'none';
      try {
        const res = await fetch('/api/generate-curriculum', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            skill, level,
            semesters: document.getElementById('semesters').value,
            weekly_hours: document.getElementById('hours').value,
            industry_focus: document.getElementById('industry').value
          })
        });
        const data = await res.json();
        document.getElementById('loading').style.display = 'none';
        if (data.success) {
          currentCurriculum = data.curriculum;
          displayResults(data.curriculum);
          document.getElementById('downloadBtns').style.display = 'flex';
        } else { alert('Error: ' + data.error); }
      } catch(e) {
        document.getElementById('loading').style.display = 'none';
        alert('Connection error! Make sure the backend is running.');
      }
    }

    function displayResults(curriculum) {
      const div = document.getElementById('results');
      div.innerHTML = '<p class="section-title">üìö Your Curriculum</p>';
      (curriculum.semesters || []).forEach(sem => {
        const semDiv = document.createElement('div');
        semDiv.className = 'semester';
        semDiv.innerHTML = `<h2>üìñ Semester ${sem.semester_number}</h2>`;
        (sem.courses || []).forEach(course => {
          const c = document.createElement('div');
          c.className = 'course';
          c.innerHTML = `
            <h3>${course.name}</h3>
            <span class="credits">${course.credits || 4} Credits</span>
            <div class='topics'>${(course.topics||[]).map(t => `<span class='topic'>${t}</span>`).join('')}</div>`;
          semDiv.appendChild(c);
        });
        div.appendChild(semDiv);
      });
    }

    async function downloadPDF() {
      if (!currentCurriculum) return;
      const res = await fetch('/api/download-pdf', {
        method: 'POST', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ curriculum: currentCurriculum })
      });
      const blob = await res.blob();
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'curriculum.pdf'; a.click();
    }

    function downloadJSON() {
      if (!currentCurriculum) return;
      const blob = new Blob([JSON.stringify(currentCurriculum, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'curriculum.json'; a.click();
    }
  </script>
</body>
</html>
